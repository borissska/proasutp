# 3D Виртуальное пространство на React и Three.js

## Описание проекта

Интерактивное 3D-приложение, представляющее собой виртуальное пространство с возможностью свободного перемещения и взаимодействия с объектами. Проект реализован на React с использованием библиотеки Three.js для 3D-рендеринга и предназначен для демонстрации информации о компании и её услугах.

## Основные возможности

### Навигация и управление

- Свободное перемещение в 3D-пространстве с помощью клавиш WASD
- Осмотр окружения с помощью движений мыши
- Система обнаружения столкновений для предотвращения прохождения сквозь стены
- Автоматическое сохранение позиции и поворота камеры между сессиями в localStorage

### Интерфейс и взаимодействие

- Центральное перекрестие для взаимодействия с объектами
- Информационные подсказки о доступных действиях
- Информационные карточки при взаимодействии с объектами
- Подсветка интерактивных объектов для улучшения пользовательского опыта

### Визуальные эффекты

- Постоянное слабое свечение интерактивных объектов
- Отключение подсветки при наведении курсора на объекты
- Информационные панели с динамическим контентом
- Реалистичное освещение и тени

## Архитектура проекта

### Технологический стек

- **React**: основа пользовательского интерфейса
- **Three.js**: библиотека для 3D-графики в браузере
- **React Three Fiber**: интеграция Three.js с React компонентами
- **React Three Drei**: готовые компоненты и утилиты для Three.js в React
- **TypeScript**: статическая типизация для улучшения разработки

### Структура проекта

#### Основные компоненты

- `/src/components/Room`: Основной контейнер 3D-сцены
  - `index.tsx`: Инициализация Canvas и управление камерой
  - `Content/index.tsx`: Организация содержимого 3D-сцены

#### Интерактивные объекты

- `/src/components/Room/Content/Box`: Коробки с информацией о компании
- `/src/components/Room/Content/DistributionBox`: Распределительные щиты
- `/src/components/Room/Content/ControlPanel`: Панель управления
- `/src/components/Room/Content/Table`: Интерактивные столы
- `/src/components/Room/Content/Model`: 3D-модели оборудования

#### Компоненты высшего порядка (HOC)

- `/src/components/Room/Content/HOC/withHoverEffect`: Добавляет эффект подсветки к объектам
  - Постоянное слабое зеленое свечение объектов
  - Обработка взаимодействия через центральное перекрестие
  - Реализация эффектов подсветки через эмиссию материалов

#### Окружение и атмосфера

- `/src/components/Environment`: Космическое окружение
  - `Space`: Звездное небо и фон
  - `Stars`: Система частиц для создания звезд
  - `Sun`, `Moon`, `Earth`: Космические объекты с анимацией

## Особенности реализации

### Система подсветки объектов

- Компонент `withHoverEffect` реализует паттерн HOC (компонент высшего порядка)
- Объекты получают постоянное слабое зеленое свечение (emissiveIntensity: 0.025)
- При наведении центрального перекрестия на объект подсветка отключается
- Используется raycasting из центра экрана для определения наведения на объект

### Перемещение в пространстве

- Реализована система обработки клавиш WASD для перемещения
- Управление камерой происходит через контекст Three.js
- Обнаружение столкновений предотвращает прохождение через стены и объекты
- Система проверяет границы помещения и корректирует позицию камеры

### Сохранение состояния

- Позиция и поворот камеры автоматически сохраняются в localStorage
- При повторном посещении пользователь возвращается в то же место
- Реализована проверка валидности сохраненных координат

### Загрузка 3D-моделей

- Использование хуков useGLTF и useFBX для загрузки моделей в формате GLB и FBX
- Клонирование моделей для предотвращения конфликтов при многократном использовании
- Присвоение уникальных идентификаторов для каждого экземпляра модели

## Перспективы развития

### Технические улучшения

- Оптимизация производительности для сложных сцен
- Улучшение системы освещения и теней
- Добавление физической симуляции для взаимодействия с объектами
- Оптимизация для мобильных устройств

### Функциональные дополнения

- Мультипользовательский режим с возможностью видеть других посетителей
- Расширенное взаимодействие с объектами (перемещение, активация)
- Динамическая загрузка контента из API
- Система телепортации между локациями

### Визуальные улучшения

- Расширение пространства и добавление новых локаций
- Улучшение качества текстур и моделей
- Добавление эффектов постобработки (bloom, ambient occlusion)
- Анимация объектов и персонажей
